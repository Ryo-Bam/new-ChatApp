(this.webpackJsonptaskgame=this.webpackJsonptaskgame||[]).push([[0],{222:function(e,t){},224:function(e,t){},235:function(e,t){},237:function(e,t){},264:function(e,t){},266:function(e,t){},267:function(e,t){},272:function(e,t){},274:function(e,t){},293:function(e,t){},305:function(e,t){},308:function(e,t){},311:function(e,t,n){},312:function(e,t,n){"use strict";n.r(t),n.d(t,"store",(function(){return Ge}));var a=n(0),r=n(12),c=n.n(r),i=n(13),u=n(90),s=n(179),o=n(62),l="SIGN_IN",j=function(e){return{type:"SIGN_IN",payload:{isSignedIn:!0,role:e.role,uid:e.uid,username:e.username,email:e.email}}},b="SIGN_OUT",d={users:{isSignedIn:!1,role:"",uid:"",username:""}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.users,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l:return Object(o.a)(Object(o.a)({},e),t.payload);case b:return Object(o.a)({},t.payload);default:return e}},m=n(37),f=n(128),x=n(86),h=n(14),p=n(316),v=n(354),_=n(2),E=Object(p.a)({button:{backgroundColor:"#1b54b5",color:"#000",fontsize:16,height:48,marginBottom:16,width:256}}),g=function(e){var t=E();return Object(_.jsx)(v.a,{className:t.button,variant:"contained",onClick:function(){return e.onClick()},children:e.label})},A=n(367),S=function(e){return Object(_.jsx)(A.a,{fullWidth:e.fullWidth,label:e.label,margin:"dense",multiline:e.multiline,required:e.required,rows:e.rows,value:e.value,type:e.type,onChange:e.onChange})},C=n(21),w=n(39),I=n.n(w),y=n(74),R=n(48),T=n.n(R),N=(n(129),n(211),n(314),n(214),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_FIREBASE_API_KEY:"AIzaSyAMGulHydxUBTL5epOeZuZvR6oM6BxN-sE",REACT_APP_FIREBASE_AUTH_DOMAIN:"twicle-92f95.firebaseapp.com",REACT_APP_FIREBASE_PROJECT_ID:"twicle-92f95",REACT_APP_FIREBASE_STORAGE_BUCKET:"twicle-92f95.appspot.com",REACT_APP_FIREBASE_MESSAGING_SENDER_ID:"977925950384",REACT_APP_FIREBASE_APP_ID:"1:977925950384:web:2f6470f0f53b775e57a475",REACT_APP_FIREBASE_MEASUREMENT_ID:"G-T3R0GK6ETS"})),P={apiKey:N.REACT_APP_FIREBASE_API_KEY,authDomain:N.REACT_APP_FIREBASE_AUTH_DOMAIN,projectId:N.REACT_APP_FIREBASE_PROJECT_ID,storageBucket:N.REACT_APP_FIREBASE_STORAGE_BUCKET,messagingSenderId:N.REACT_APP_FIREBASE_MESSAGING_SENDER_ID,appId:N.REACT_APP_FIREBASE_APP_ID,measurementId:N.REACT_APP_FIREBASE_MEASUREMENT_ID};n(216);T.a.initializeApp(P);var k,B=T.a.auth(),F=T.a.firestore(),D=(T.a.storage(),T.a.functions(),T.a.firestore.Timestamp),W=T.a.database().ref("messages"),G=function(e){var t=e.name,n=e.text;W.push({name:t,text:n})},M=function(){var e=Object(i.d)(),t=Object(a.useState)(""),n=Object(h.a)(t,2),r=n[0],c=n[1],u=Object(a.useState)(""),s=Object(h.a)(u,2),o=s[0],l=s[1],b=Object(a.useCallback)((function(e){c(e.target.value)}),[c]),d=Object(a.useCallback)((function(e){l(e.target.value)}),[l]);return Object(_.jsxs)("div",{className:"c-section-container",children:[Object(_.jsx)("h2",{className:"u-text__headline u-text-center",children:"\u30b5\u30a4\u30f3\u30a4\u30f3"}),Object(_.jsx)("div",{className:"module-spacer--medium"}),Object(_.jsx)(S,{fullWidth:!0,label:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9",multiline:!1,required:!0,rows:1,value:r,type:"email",onChange:b}),Object(_.jsx)(S,{fullWidth:!0,label:"\u30d1\u30b9\u30ef\u30fc\u30c9",multiline:!1,required:!0,rows:1,value:o,type:"password",onChange:d}),Object(_.jsx)("div",{className:"module-spacer--medium"}),Object(_.jsxs)("div",{className:"center",children:[Object(_.jsx)(g,{label:"Sign In",onClick:function(){return e(function(e,t){return function(){var n=Object(y.a)(I.a.mark((function n(a){return I.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(""!==e&&""!==t){n.next=3;break}return alert("\u5fc5\u9808\u9805\u76ee\u304c\u672a\u5165\u529b\u3067\u3059"),n.abrupt("return",!1);case 3:B.signInWithEmailAndPassword(e,t).then((function(e){var t=e.user;if(t){var n=t.uid;F.collection("users").doc(n).get().then((function(e){var t=e.data();a(j({isSignedIn:!0,role:t.role,uid:n,username:t.username,email:t.email})),a(Object(C.d)("/"))}))}}));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}(r,o))}}),Object(_.jsx)("div",{className:"module-spacer--medium"}),Object(_.jsx)("p",{onClick:function(){return e(Object(C.d)("./signup"))},children:"\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u304a\u6301\u3061\u3067\u306a\u3044\u65b9\u306f\u3053\u3061\u3089"})]})]})},U=n(359),K=n(370),q=n(357),L=n(75),H=function(e){return e.users},J=(Object(L.a)([H],(function(e){return e.uid})),Object(L.a)([H],(function(e){return e.username}))),z=Object(L.a)([H],(function(e){return e.isSignedIn})),V=Object(L.a)([H],(function(e){return e.email})),Y=Object(q.a)({Text:{width:"100%"}}),Z=function(e){var t=e.inputEl,n=e.setText,r=e.text,c=Object(a.useState)(!1),u=Object(h.a)(c,2),s=u[0],o=u[1],l=Y(),j=Object(i.e)((function(e){return e})),b=J(j);return Object(_.jsx)(A.a,{className:l.Text,autoFocus:!0,inputRef:t,onChange:function(e){return n(e.target.value)},onKeyDown:function(e){if(!s){var t=e.target.value;""!==t&&"Enter"===e.key&&(G({name:{username:b},text:t}),n(""),e.preventDefault())}},onCompositionStart:function(){return o(!0)},onCompositionEnd:function(){return o(!1)},value:r})},Q=n(358),X=n(185),$=n.n(X),ee=Object(p.a)({send:{color:"#1b54b5"}}),te=function(e){var t=e.inputEl,n=e.setText,a=e.text,r=ee(),c=Object(i.e)((function(e){return e})),u=J(c);return Object(_.jsx)(Q.a,{disabled:""===a,onClick:function(){G({name:{username:u},text:a}),n(""),t.current.focus()},children:Object(_.jsx)($.a,{className:r.send})})},ne=n(186),ae=n.n(ne),re=function(e){var t=e.email.trim().toLowerCase(),n=ae.a.createHash("md5").update(t,"binary").digest("hex");return"https://www.gravatar.com/avatar/".concat(n,"/?d=mp")},ce=Object(p.a)({Form:{display:"flex",justifyContent:"center",width:"95%",margin:"26px",gridRow:2}}),ie=function(e){var t=e.name,n=Object(a.useRef)(null),r=Object(a.useState)(""),c=Object(h.a)(r,2),u=c[0],s=c[1],o=ce(),l=Object(i.e)((function(e){return e})),j=V(l),b=re({email:j});return Object(_.jsx)(_.Fragment,{children:Object(_.jsx)("form",{className:o.Form,children:Object(_.jsxs)(U.a,{container:!0,children:[Object(_.jsx)(U.a,{item:!0,xs:1,children:Object(_.jsx)(K.a,{src:b})}),Object(_.jsx)(U.a,{item:!0,xs:10,children:Object(_.jsx)(Z,{inputEl:n,name:t,setText:s,text:u})}),Object(_.jsx)(U.a,{item:!0,xs:1,children:Object(_.jsx)(v.a,{variant:"containd",color:"primary",children:Object(_.jsx)(te,{inputEl:n,name:t,setText:s,text:u})})})]})})})},ue=n(356),se=n(360),oe=n(361),le=n(362),je=n(91),be=Object(p.a)({inline:{display:"inline"}}),de=function(e){var t=e.isLastItem,n=e.text,r=e.name,c=Object(a.useRef)(null),u=be(),s=Object(i.e)((function(e){return e})),o=V(s),l=re({email:o});return Object(a.useEffect)((function(){t&&c.current.scrollIntoView({behavior:"smooth"})}),[t]),Object(_.jsxs)(se.a,{divider:!0,ref:c,children:[Object(_.jsx)(oe.a,{children:Object(_.jsx)(K.a,{src:l})}),Object(_.jsx)(le.a,{primary:r,secondary:Object(_.jsx)(je.a,{component:"span",variant:"body2",className:u.inline,color:"textPrimary",children:n})})]})},Oe=Object(q.a)({root:{gridRow:1,overflow:"auto",width:"100%"}}),me=function(){var e=Object(a.useState)([]),t=Object(h.a)(e,2),n=t[0],r=t[1],c=Oe();Object(a.useEffect)((function(){W.orderByKey().limitToLast(30).on("value",(function(e){var t=e.val();if(null!==t){var n=Object.entries(t).map((function(e){var t=Object(h.a)(e,2),n=t[0],a=t[1];return Object(o.a)({key:n},a)}));r(n)}}))}),[]);var i=n.length;return Object(_.jsx)(ue.a,{className:c.root,children:n.map((function(e,t){var n=e.key,a=e.name,r=e.text,c=i===t+1;return Object(_.jsx)(de,{name:a.username,text:r,isLastItem:c},n)}))})},fe=Object(q.a)({rot:{display:"grid",height:"86vh",gridTemplateRows:"1fr auto",maxWidth:1024,margin:"0 auto"}}),xe=function(){var e=fe();return Object(_.jsxs)("div",{className:e.rot,children:[Object(_.jsx)(me,{}),Object(_.jsx)(ie,{})]})},he=function(){var e=Object(i.d)(),t=Object(a.useState)(""),n=Object(h.a)(t,2),r=n[0],c=n[1],u=Object(a.useState)(""),s=Object(h.a)(u,2),o=s[0],l=s[1],j=Object(a.useState)(""),b=Object(h.a)(j,2),d=b[0],O=b[1],m=Object(a.useState)(""),f=Object(h.a)(m,2),x=f[0],p=f[1],v=Object(a.useCallback)((function(e){c(e.target.value)}),[c]),E=Object(a.useCallback)((function(e){l(e.target.value)}),[l]),A=Object(a.useCallback)((function(e){O(e.target.value)}),[O]),w=Object(a.useCallback)((function(e){p(e.target.value)}),[p]);return Object(_.jsxs)("div",{className:"c-section-container",children:[Object(_.jsx)("h2",{className:"u-text__handline u-text-center",children:"\u30a2\u30ab\u30a6\u30f3\u30c8\u767b\u9332"}),Object(_.jsx)("div",{className:"module-spacer--medium"}),Object(_.jsx)(S,{fullWidth:!0,label:"\u30e6\u30fc\u30b6\u30fc\u540d",multiline:!1,required:!0,rows:1,value:r,type:"text",onChange:v}),Object(_.jsx)(S,{fullWidth:!0,label:"\u30e1\u30fc\u30eb\u30a2\u30c9\u30ec\u30b9",multiline:!1,required:!0,rows:1,value:o,type:"email",onChange:E}),Object(_.jsx)(S,{fullWidth:!0,label:"\u30d1\u30b9\u30ef\u30fc\u30c9",multiline:!1,required:!0,rows:1,value:d,type:"password",onChange:A}),Object(_.jsx)(S,{fullWidth:!0,label:"\u30d1\u30b9\u30ef\u30fc\u30c9\uff08\u518d\u78ba\u8a8d\uff09",multiline:!1,required:!0,rows:1,value:x,type:"password",onChange:w}),Object(_.jsx)("div",{className:"module-spacer--medium"}),Object(_.jsxs)("div",{className:"center",children:[Object(_.jsx)(g,{label:"\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u767b\u9332\u3059\u308b",onClick:function(){return e(function(e,t,n,a){return function(){var r=Object(y.a)(I.a.mark((function r(c){return I.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(""!==e&&""!==t&&""!==n&&""!==a){r.next=3;break}return alert("\u5fc5\u9808\u9805\u76ee\u304c\u672a\u5165\u529b\u3067\u3059"),r.abrupt("return",!1);case 3:if(n===a){r.next=6;break}return alert("\u30d1\u30b9\u30ef\u30fc\u30c9\u304c\u4e00\u81f4\u3057\u307e\u305b\u3093\u3002\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002"),r.abrupt("return",!1);case 6:return r.abrupt("return",B.createUserWithEmailAndPassword(t,n).then((function(n){var a=n.user;if(a){var r=a.uid,i=D.now(),u={created_at:i,email:t,role:"customer",uid:r,updated_at:i,username:e};F.collection("users").doc(r).set(u).then((function(){c(Object(C.d)("/"))}))}})));case 7:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(r,o,d,x))}}),Object(_.jsx)("div",{className:"module-spacer--medium"}),Object(_.jsx)("p",{onClick:function(){return e(Object(C.d)("./signin"))},children:"\u30a2\u30ab\u30a6\u30f3\u30c8\u3092\u304a\u6301\u3061\u306e\u65b9\u306f\u3053\u3061\u3089"})]})]})},pe=function(e){var t=e.children,n=Object(i.d)(),r=Object(i.e)((function(e){return e})),c=z(r);return Object(a.useEffect)((function(){c||n(function(){var e=Object(y.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",B.onAuthStateChanged((function(e){e?F.collection("users").doc(e.uid).get().then((function(n){var a=n.data();if(!a)throw new Error("\u30e6\u30fc\u30b6\u30fc\u30c7\u30fc\u30bf\u304c\u5b58\u5728\u3057\u307e\u305b\u3093\u3002");t(j({customer_id:a.customer_id?a.customer_id:"",email:a.email,isSignedIn:!0,payment_method_id:a.payment_method_id?a.payment_method_id:"",role:a.role,uid:e.uid,username:a.username}))})):t(Object(C.d)("/signin"))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),c?t:Object(_.jsx)(_.Fragment,{})},ve=function(){return Object(_.jsxs)(x.c,{children:[Object(_.jsx)(x.a,{exact:!0,path:"/signup",component:he}),Object(_.jsx)(x.a,{exact:!0,path:"/signin",component:M}),Object(_.jsx)(pe,{children:Object(_.jsx)(x.a,{exact:!0,path:"(/)?",component:xe})})]})},_e=(n(311),n(363)),Ee=n(364),ge=Object(q.a)((function(e){return{root:{flexGrow:1},menuBar:{backgroundColor:"#1b54b5",color:"#fff"},toolBar:{margin:"0 auto",maxWidth:1024,width:"100%"},iconButtons:{margin:"0 0 0 auto"}}})),Ae=function(){var e=ge(),t=Object(i.e)((function(e){return e})),n=Object(i.d)(),r=z(t),c=Object(a.useState)(!1),u=Object(h.a)(c,2),s=u[0],o=u[1],l=Object(a.useCallback)((function(e){("keydown"!==e.type||"tab"!==e.key&&"Shift"!==e.key)&&o(!s)}),[o,s]);return Object(_.jsxs)("div",{className:e.root,children:[Object(_.jsx)(_e.a,{position:"fixed",className:e.menuBar,children:Object(_.jsxs)(Ee.a,{className:e.toolBar,children:[Object(_.jsx)("p",{onClick:function(){return n(Object(C.d)("/"))},children:"\uff12\u56de\u76ee\u3060\u3058\u3087"}),r&&Object(_.jsx)("div",{className:e.iconButtons,children:Object(_.jsx)(Ie,{handleDrawerToggle:l})})]})}),Object(_.jsx)(Fe,{open:s,onClose:l})]})},Se=n(187),Ce=n.n(Se),we=Object(q.a)({Icon:{color:"#fff"}}),Ie=function(e){var t=we();return Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(Q.a,{onClick:function(t){return e.handleDrawerToggle(t)},children:Object(_.jsx)(Ce.a,{className:t.Icon})})})},ye=n(85),Re=n(369),Te=n(365),Ne=n(366),Pe=n(188),ke=n.n(Pe),Be=Object(q.a)((function(e){return{drawer:Object(ye.a)({},e.breakpoints.up("sm"),{flexShrink:0,width:256}),toolbar:e.mixins.toolbar,drawerPaper:{width:256},searchField:{alignItems:"center",display:"flex",marginLeft:32}}})),Fe=function(e){var t=Object(i.d)(),n=Be(),r=e.container,c=Object(a.useState)(""),u=Object(h.a)(c,2),s=u[0],o=u[1],l=Object(a.useCallback)((function(e){o(e.target.value)}),[o]);return Object(_.jsx)("nav",{className:n.drawer,children:Object(_.jsxs)(Re.a,{container:r,variant:"temporary",anchor:"right",open:e.open,onClose:function(t){return e.onClose(t)},classes:{paper:n.drawer},ModalProps:{keepMounted:!0},children:[Object(_.jsx)("div",{className:n.searchField,children:Object(_.jsx)(S,{fullWidth:!1,label:"\u30ad\u30fc\u30ef\u30fc\u30c9\u3092\u5165\u529b",multiline:!1,onChange:l,required:!1,rows:1,value:s,type:"text"})}),Object(_.jsx)(Te.a,{}),Object(_.jsx)(ue.a,{children:Object(_.jsxs)(se.a,{button:!0,onClick:function(){return t(function(){var e=Object(y.a)(I.a.mark((function e(t){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:B.signOut().then((function(){t({type:"SIGN_OUT",payload:{isSignedIn:!1,role:"",uid:"",username:""}}),t(Object(C.d)("./signin"))}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:[Object(_.jsx)(Ne.a,{children:Object(_.jsx)(ke.a,{})}),Object(_.jsx)(le.a,{primary:"Logout"})]},"logout")})]})})},De=function(){return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(Ae,{}),Object(_.jsx)("main",{className:"c-main",children:Object(_.jsx)(ve,{})})]})},We=n(35).a(),Ge=(k=We,Object(u.c)(Object(u.b)({router:Object(m.b)(k),users:O}),Object(u.a)(Object(f.a)(k),s.a)));c.a.render(Object(_.jsx)(i.a,{store:Ge,children:Object(_.jsx)(m.a,{history:We,children:Object(_.jsx)(De,{})})}),document.getElementById("root"))}},[[312,1,2]]]);
//# sourceMappingURL=main.9c557b3a.chunk.js.map